<div class="manage-members-container">
  <h1 class="page-title">ğŸ¯ Quáº£n lÃ½ thÃ nh viÃªn - <strong><%= @team.name %></strong></h1>

  <!-- Thá»‘ng kÃª -->
  <div class="stats-bar">
    <div class="stat-card">
      <div class="stat-number"><%= @team_members.count %></div>
      <div class="stat-label">ThÃ nh viÃªn hiá»‡n táº¡i</div>
    </div>
    <div class="stat-card">
      <div class="stat-number"><%= @available_users.count %></div>
      <div class="stat-label">User kháº£ dá»¥ng</div>
    </div>
  </div>

  <!-- ThÃ nh viÃªn hiá»‡n táº¡i -->
  <div class="section">
    <h3 class="section-title">
      <i>ğŸ‘¥</i> ThÃ nh viÃªn hiá»‡n táº¡i
    </h3>
    
    <% if @team_members.any? %>
    <% @team_members.each do |user| %>
      <div class="member-item">
        <div class="user-info">
          <div class="user-name">
            <%= user.name %>
            <span class="user-role role-<%= user.role&.parameterize || 'user' %>">
              <%= user.role || 'user' %>
            </span>
            <% if user == current_user %>
              <span class="badge bg-primary">Báº¡n</span>
            <% end %>
          </div>
          <div class="user-email"><%= user.email %></div>
        </div>
        
        <% if user != current_user %>
          <%= button_to 'ğŸ—‘ï¸ XoÃ¡ khá»i team', 
              remove_member_team_path(@team, user_id: user.id), 
              method: :delete, 
              class: 'btn-custom btn-danger',
              data: { confirm: "Báº¡n cÃ³ cháº¯c muá»‘n xÃ³a #{user.name} khá»i team?" } %>
        <% else %>
          <button class="btn-custom btn-secondary" disabled>KhÃ´ng thá»ƒ xÃ³a chÃ­nh mÃ¬nh</button>
        <% end %>
      </div>
    <% end %>
  <% else %>
      <div class="empty-state">
        <div>ğŸ“­</div>
        <h4>ChÆ°a cÃ³ thÃ nh viÃªn nÃ o</h4>
        <p>ThÃªm thÃ nh viÃªn vÃ o team Ä‘á»ƒ báº¯t Ä‘áº§u lÃ m viá»‡c</p>
      </div>
    <% end %>
  </div>

  <!-- ThÃªm user vÃ o team -->
  <div class="section">
    <h3 class="section-title">
      <i>â•</i> ThÃªm user vÃ o team
    </h3>
    
    <% if @available_users.any? %>
      <div class="available-users-list">
        <% @available_users.each do |user| %>
          <div class="user-item">
            <div class="user-info">
              <div class="user-name">
                <%= user.name %>
                <span class="user-role role-<%= user.role&.parameterize || 'user' %>">
                  <%= user.role || 'user' %>
                </span>
              </div>
              <div class="user-email"><%= user.email %></div>
            </div>
            <%= button_to 'âœ… ThÃªm vÃ o team', 
                add_member_team_path(@team, user_id: user.id), 
                method: :post,
                class: 'btn-custom btn-success',
                data: { confirm: "ThÃªm #{user.name} vÃ o team #{@team.name}?" } %>
          </div>
        <% end %>
      </div>
    <% else %>
      <div class="empty-state">
        <div>ğŸ˜”</div>
        <h4>KhÃ´ng cÃ³ user nÃ o kháº£ dá»¥ng</h4>
        <p>Táº¥t cáº£ user Ä‘Ã£ Ä‘Æ°á»£c thÃªm vÃ o cÃ¡c team khÃ¡c</p>
      </div>
    <% end %>
  </div>
</div>