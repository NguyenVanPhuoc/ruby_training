<div class="page-header">
  <h1><%= user.new_record? ? 'Tạo User Mới' : 'Chỉnh sửa User' %></h1>
  <p><%= user.new_record? ? 'Thêm người dùng mới vào hệ thống' : 'Cập nhật thông tin người dùng' %></p>
</div>

<div class="form-card">
  <%= form_with(model: user, local: true) do |form| %>
    <% if user.errors.any? %>
      <div class="alert alert-danger" style="margin-bottom: 24px;">
        <i class="fas fa-exclamation-circle"></i>
        <div>
          <strong><%= pluralize(user.errors.count, "lỗi") %> ngăn không cho lưu:</strong>
          <ul style="margin: 8px 0 0 24px;">
            <% user.errors.full_messages.each do |message| %>
              <li><%= message %></li>
            <% end %>
          </ul>
        </div>
      </div>
    <% end %>

    <div class="form-group">
      <%= form.label :name, "Tên", class: 'form-label' %>
      <%= form.text_field :name, class: 'form-control', placeholder: 'Nhập tên user' %>
    </div>

    <div class="form-group">
      <%= form.label :email, "Email", class: 'form-label' %>
      <%= form.email_field :email, class: 'form-control', placeholder: 'email@example.com' %>
    </div>

    <div class="form-group">
      <%= form.label :password, "Mật khẩu", class: 'form-label' %>
      <%= form.password_field :password, class: 'form-control', placeholder: user.new_record? ? 'Nhập mật khẩu' : 'Để trống nếu không thay đổi' %>
      <% unless user.new_record? %>
        <small style="color: #64748b; font-size: 13px; display: block; margin-top: 4px;">
          Để trống nếu không muốn thay đổi mật khẩu
        </small>
      <% end %>
    </div>

    <div class="form-group">
      <%= form.label :team_id, "Team", class: 'form-label' %>
      <%= form.collection_select :team_id, Team.all, :id, :name, 
          { prompt: 'Chọn team', include_blank: 'Không thuộc team nào' }, 
          { class: 'form-control' } %>
    </div>

    <div class="form-group">
      <%= form.label :avatar, "Avatar URL", class: 'form-label' %>
      <%= form.text_field :avatar, class: 'form-control', placeholder: 'https://example.com/avatar.jpg' %>
      <small style="color: #64748b; font-size: 13px; display: block; margin-top: 4px;">
        Nhập URL của ảnh avatar
      </small>
    </div>

    <div class="form-actions">
      <%= form.submit user.new_record? ? 'Tạo User' : 'Cập nhật', class: 'btn btn-primary' %>
      <%= link_to 'Hủy', users_path, class: 'btn btn-secondary' %>
    </div>
  <% end %>
</div>